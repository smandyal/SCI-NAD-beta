---
import cookie from 'cookie';

const cookies = cookie.parse(Astro.request.headers.get('cookie') || '');
const user = cookies.user ? JSON.parse(cookies.user) : null;

if (!user) {
  Astro.response.redirect('/api/auth/login');
  return;
}
---

<h1>Welcome, {user.name}!</h1>
<p>Email: {user.email}</p>
<p>This is a protected page only accessible to logged-in users.</p>